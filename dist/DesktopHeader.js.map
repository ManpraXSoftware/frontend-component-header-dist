{"version":3,"file":"DesktopHeader.js","names":["React","PropTypes","injectIntl","intlShape","getConfig","ThemeToggleButton","Menu","MenuTrigger","MenuContent","Avatar","LinkedLogo","Logo","messages","CaretIcon","DesktopHeader","Component","constructor","props","renderMenu","menu","Array","isArray","map","menuItem","type","href","content","submenuContent","disabled","isActive","onClick","createElement","key","className","tag","respondToPointerEvents","role","focusable","renderMainMenu","mainMenu","renderSecondaryMenu","secondaryMenu","renderUserMenu","userMenu","avatar","username","intl","transitionClassName","transitionTimeout","formatMessage","size","src","alt","group","index","Fragment","heading","items","_ref","length","renderLoggedOutItems","loggedOutItems","item","i","arr","render","logo","logoAltText","logoDestination","loggedIn","logoProps","logoClasses","AUTHN_MINIMAL_HEADER","_extends","propTypes","oneOfType","node","array","arrayOf","shape","string","oneOf","bool","func","isRequired","defaultProps"],"sources":["../src/DesktopHeader.jsx"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { injectIntl, intlShape } from '@edx/frontend-platform/i18n';\nimport { getConfig } from '@edx/frontend-platform';\nimport ThemeToggleButton from './ThemeToggleButton';\n\n// Local Components\nimport { Menu, MenuTrigger, MenuContent } from './Menu';\nimport Avatar from './Avatar';\nimport { LinkedLogo, Logo } from './Logo';\n\n// i18n\nimport messages from './Header.messages';\n\n// Assets\nimport { CaretIcon } from './Icons';\n\nclass DesktopHeader extends React.Component {\n  constructor(props) { // eslint-disable-line no-useless-constructor\n    super(props);\n  }\n\n  renderMenu(menu) {\n    // Nodes are accepted as a prop\n    if (!Array.isArray(menu)) {\n      return menu;\n    }\n\n    return menu.map((menuItem) => {\n      const {\n        type,\n        href,\n        content,\n        submenuContent,\n        disabled,\n        isActive,\n        onClick,\n      } = menuItem;\n\n      if (type === 'item') {\n        return (\n          <a\n            key={`${type}-${content}`}\n            className={`nav-link${disabled ? ' disabled' : ''}${isActive ? ' active' : ''}`}\n            href={href}\n            onClick={onClick || null}\n          >\n            {content}\n          </a>\n        );\n      }\n\n      return (\n        <Menu key={`${type}-${content}`} tag=\"div\" className=\"nav-item\" respondToPointerEvents>\n          <MenuTrigger onClick={onClick || null} tag=\"a\" className=\"nav-link d-inline-flex align-items-center\" href={href}>\n            {content} <CaretIcon role=\"img\" aria-hidden focusable=\"false\" />\n          </MenuTrigger>\n          <MenuContent className=\"pin-left pin-right shadow py-2\">\n            {submenuContent}\n          </MenuContent>\n        </Menu>\n      );\n    });\n  }\n\n  renderMainMenu() {\n    const { mainMenu } = this.props;\n    return this.renderMenu(mainMenu);\n  }\n\n  renderSecondaryMenu() {\n    const { secondaryMenu } = this.props;\n    return this.renderMenu(secondaryMenu);\n  }\n\n  renderUserMenu() {\n    const {\n      userMenu,\n      avatar,\n      username,\n      intl,\n    } = this.props;\n\n    return (\n      <Menu transitionClassName=\"menu-dropdown\" transitionTimeout={250}>\n        <MenuTrigger\n          tag=\"button\"\n          aria-label={intl.formatMessage(messages['header.label.account.menu.for'], { username })}\n          className=\"btn btn-outline-primary d-inline-flex align-items-center pl-2 pr-3\"\n        >\n          <Avatar size=\"1.5em\" src={avatar} alt=\"\" className=\"mr-2\" />\n          {username} <CaretIcon role=\"img\" aria-hidden focusable=\"false\" />\n        </MenuTrigger>\n        <MenuContent className=\"mb-0 dropdown-menu show dropdown-menu-right pin-right shadow py-2\">\n          {userMenu.map((group, index) => (\n            // eslint-disable-next-line react/jsx-no-comment-textnodes,react/no-array-index-key\n            <React.Fragment key={index}>\n              {group.heading && <div className=\"dropdown-header\" role=\"heading\" aria-level=\"1\">{group.heading}</div>}\n              {group.items.map(({\n                type, content, href, disabled, isActive, onClick,\n              }) => (\n                <a\n                  className={`dropdown-${type}${isActive ? ' active' : ''}${disabled ? ' disabled' : ''}`}\n                  key={`${type}-${content}`}\n                  href={href}\n                  onClick={onClick || null}\n                >\n                  {content}\n                </a>\n              ))}\n              {index < userMenu.length - 1 && <div className=\"dropdown-divider\" role=\"separator\" />}\n            </React.Fragment>\n          ))}\n        </MenuContent>\n      </Menu>\n    );\n  }\n\n  renderLoggedOutItems() {\n    const { loggedOutItems } = this.props;\n\n    return loggedOutItems.map((item, i, arr) => (\n      <a\n        key={`${item.type}-${item.content}`}\n        className={i < arr.length - 1 ? 'btn mr-2 btn-link' : 'btn mr-2 btn-outline-primary'}\n        href={item.href}\n      >\n        {item.content}\n      </a>\n    ));\n  }\n\n  render() {\n    const {\n      logo,\n      logoAltText,\n      logoDestination,\n      loggedIn,\n      intl,\n    } = this.props;\n    const logoProps = { src: logo, alt: logoAltText, href: logoDestination };\n    const logoClasses = getConfig().AUTHN_MINIMAL_HEADER ? 'mw-100' : null;\n\n    return (\n      <header className=\"site-header-desktop\">\n        <a className=\"nav-skip sr-only sr-only-focusable\" href=\"#main\">{intl.formatMessage(messages['header.label.skip.nav'])}</a>\n        <div className={`container-fluid ${logoClasses}`}>\n          <div className=\"nav-container position-relative d-flex align-items-center\">\n            {logoDestination === null ? <Logo className=\"logo\" src={logo} alt={logoAltText} /> : <LinkedLogo className=\"logo\" {...logoProps} />}\n            <nav\n              aria-label={intl.formatMessage(messages['header.label.main.nav'])}\n              className=\"nav main-nav\"\n            >\n              {this.renderMainMenu()}\n            </nav>\n            <nav\n              aria-label={intl.formatMessage(messages['header.label.secondary.nav'])}\n              className=\"nav secondary-menu-container align-items-center ml-auto\"\n            >\n              <div className=\"mr-3\"><ThemeToggleButton /></div>\n              {loggedIn\n                ? (\n                  <>\n                    {this.renderSecondaryMenu()}\n                    {this.renderUserMenu()}\n                  </>\n                ) : this.renderLoggedOutItems()}\n            </nav>\n          </div>\n        </div>\n      </header>\n    );\n  }\n}\n\nDesktopHeader.propTypes = {\n  mainMenu: PropTypes.oneOfType([\n    PropTypes.node,\n    PropTypes.array,\n  ]),\n  secondaryMenu: PropTypes.oneOfType([\n    PropTypes.node,\n    PropTypes.array,\n  ]),\n  userMenu: PropTypes.arrayOf(PropTypes.shape({\n    heading: PropTypes.string,\n    items: PropTypes.arrayOf(PropTypes.shape({\n      type: PropTypes.oneOf(['item', 'menu']),\n      href: PropTypes.string,\n      content: PropTypes.string,\n      isActive: PropTypes.bool,\n      onClick: PropTypes.func,\n    })),\n  })),\n  loggedOutItems: PropTypes.arrayOf(PropTypes.shape({\n    type: PropTypes.oneOf(['item', 'menu']),\n    href: PropTypes.string,\n    content: PropTypes.string,\n  })),\n  logo: PropTypes.string,\n  logoAltText: PropTypes.string,\n  logoDestination: PropTypes.string,\n  avatar: PropTypes.string,\n  username: PropTypes.string,\n  loggedIn: PropTypes.bool,\n\n  // i18n\n  intl: intlShape.isRequired,\n};\n\nDesktopHeader.defaultProps = {\n  mainMenu: [],\n  secondaryMenu: [],\n  userMenu: [],\n  loggedOutItems: [],\n  logo: null,\n  logoAltText: null,\n  logoDestination: null,\n  avatar: null,\n  username: null,\n  loggedIn: false,\n};\n\nexport default injectIntl(DesktopHeader);\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,SAAS,MAAM,YAAY;AAClC,SAASC,UAAU,EAAEC,SAAS,QAAQ,6BAA6B;AACnE,SAASC,SAAS,QAAQ,wBAAwB;AAClD,OAAOC,iBAAiB,MAAM,qBAAqB;;AAEnD;AACA,SAASC,IAAI,EAAEC,WAAW,EAAEC,WAAW,QAAQ,QAAQ;AACvD,OAAOC,MAAM,MAAM,UAAU;AAC7B,SAASC,UAAU,EAAEC,IAAI,QAAQ,QAAQ;;AAEzC;AACA,OAAOC,QAAQ,MAAM,mBAAmB;;AAExC;AACA,SAASC,SAAS,QAAQ,SAAS;AAEnC,MAAMC,aAAa,SAASd,KAAK,CAACe,SAAS,CAAC;EAC1CC,WAAWA,CAACC,KAAK,EAAE;IAAE;IACnB,KAAK,CAACA,KAAK,CAAC;EACd;EAEAC,UAAUA,CAACC,IAAI,EAAE;IACf;IACA,IAAI,CAACC,KAAK,CAACC,OAAO,CAACF,IAAI,CAAC,EAAE;MACxB,OAAOA,IAAI;IACb;IAEA,OAAOA,IAAI,CAACG,GAAG,CAAEC,QAAQ,IAAK;MAC5B,MAAM;QACJC,IAAI;QACJC,IAAI;QACJC,OAAO;QACPC,cAAc;QACdC,QAAQ;QACRC,QAAQ;QACRC;MACF,CAAC,GAAGP,QAAQ;MAEZ,IAAIC,IAAI,KAAK,MAAM,EAAE;QACnB,oBACExB,KAAA,CAAA+B,aAAA;UACEC,GAAG,EAAG,GAAER,IAAK,IAAGE,OAAQ,EAAE;UAC1BO,SAAS,EAAG,WAAUL,QAAQ,GAAG,WAAW,GAAG,EAAG,GAAEC,QAAQ,GAAG,SAAS,GAAG,EAAG,EAAE;UAChFJ,IAAI,EAAEA,IAAK;UACXK,OAAO,EAAEA,OAAO,IAAI;QAAK,GAExBJ,OACA,CAAC;MAER;MAEA,oBACE1B,KAAA,CAAA+B,aAAA,CAACzB,IAAI;QAAC0B,GAAG,EAAG,GAAER,IAAK,IAAGE,OAAQ,EAAE;QAACQ,GAAG,EAAC,KAAK;QAACD,SAAS,EAAC,UAAU;QAACE,sBAAsB;MAAA,gBACpFnC,KAAA,CAAA+B,aAAA,CAACxB,WAAW;QAACuB,OAAO,EAAEA,OAAO,IAAI,IAAK;QAACI,GAAG,EAAC,GAAG;QAACD,SAAS,EAAC,2CAA2C;QAACR,IAAI,EAAEA;MAAK,GAC7GC,OAAO,EAAC,GAAC,eAAA1B,KAAA,CAAA+B,aAAA,CAAClB,SAAS;QAACuB,IAAI,EAAC,KAAK;QAAC,mBAAW;QAACC,SAAS,EAAC;MAAO,CAAE,CACpD,CAAC,eACdrC,KAAA,CAAA+B,aAAA,CAACvB,WAAW;QAACyB,SAAS,EAAC;MAAgC,GACpDN,cACU,CACT,CAAC;IAEX,CAAC,CAAC;EACJ;EAEAW,cAAcA,CAAA,EAAG;IACf,MAAM;MAAEC;IAAS,CAAC,GAAG,IAAI,CAACtB,KAAK;IAC/B,OAAO,IAAI,CAACC,UAAU,CAACqB,QAAQ,CAAC;EAClC;EAEAC,mBAAmBA,CAAA,EAAG;IACpB,MAAM;MAAEC;IAAc,CAAC,GAAG,IAAI,CAACxB,KAAK;IACpC,OAAO,IAAI,CAACC,UAAU,CAACuB,aAAa,CAAC;EACvC;EAEAC,cAAcA,CAAA,EAAG;IACf,MAAM;MACJC,QAAQ;MACRC,MAAM;MACNC,QAAQ;MACRC;IACF,CAAC,GAAG,IAAI,CAAC7B,KAAK;IAEd,oBACEjB,KAAA,CAAA+B,aAAA,CAACzB,IAAI;MAACyC,mBAAmB,EAAC,eAAe;MAACC,iBAAiB,EAAE;IAAI,gBAC/DhD,KAAA,CAAA+B,aAAA,CAACxB,WAAW;MACV2B,GAAG,EAAC,QAAQ;MACZ,cAAYY,IAAI,CAACG,aAAa,CAACrC,QAAQ,CAAC,+BAA+B,CAAC,EAAE;QAAEiC;MAAS,CAAC,CAAE;MACxFZ,SAAS,EAAC;IAAoE,gBAE9EjC,KAAA,CAAA+B,aAAA,CAACtB,MAAM;MAACyC,IAAI,EAAC,OAAO;MAACC,GAAG,EAAEP,MAAO;MAACQ,GAAG,EAAC,EAAE;MAACnB,SAAS,EAAC;IAAM,CAAE,CAAC,EAC3DY,QAAQ,EAAC,GAAC,eAAA7C,KAAA,CAAA+B,aAAA,CAAClB,SAAS;MAACuB,IAAI,EAAC,KAAK;MAAC,mBAAW;MAACC,SAAS,EAAC;IAAO,CAAE,CACrD,CAAC,eACdrC,KAAA,CAAA+B,aAAA,CAACvB,WAAW;MAACyB,SAAS,EAAC;IAAmE,GACvFU,QAAQ,CAACrB,GAAG,CAAC,CAAC+B,KAAK,EAAEC,KAAK;IAAA;IACzB;IACAtD,KAAA,CAAA+B,aAAA,CAAC/B,KAAK,CAACuD,QAAQ;MAACvB,GAAG,EAAEsB;IAAM,GACxBD,KAAK,CAACG,OAAO,iBAAIxD,KAAA,CAAA+B,aAAA;MAAKE,SAAS,EAAC,iBAAiB;MAACG,IAAI,EAAC,SAAS;MAAC,cAAW;IAAG,GAAEiB,KAAK,CAACG,OAAa,CAAC,EACrGH,KAAK,CAACI,KAAK,CAACnC,GAAG,CAACoC,IAAA;MAAA,IAAC;QAChBlC,IAAI;QAAEE,OAAO;QAAED,IAAI;QAAEG,QAAQ;QAAEC,QAAQ;QAAEC;MAC3C,CAAC,GAAA4B,IAAA;MAAA,oBACC1D,KAAA,CAAA+B,aAAA;QACEE,SAAS,EAAG,YAAWT,IAAK,GAAEK,QAAQ,GAAG,SAAS,GAAG,EAAG,GAAED,QAAQ,GAAG,WAAW,GAAG,EAAG,EAAE;QACxFI,GAAG,EAAG,GAAER,IAAK,IAAGE,OAAQ,EAAE;QAC1BD,IAAI,EAAEA,IAAK;QACXK,OAAO,EAAEA,OAAO,IAAI;MAAK,GAExBJ,OACA,CAAC;IAAA,CACL,CAAC,EACD4B,KAAK,GAAGX,QAAQ,CAACgB,MAAM,GAAG,CAAC,iBAAI3D,KAAA,CAAA+B,aAAA;MAAKE,SAAS,EAAC,kBAAkB;MAACG,IAAI,EAAC;IAAW,CAAE,CACtE,CACjB,CACU,CACT,CAAC;EAEX;EAEAwB,oBAAoBA,CAAA,EAAG;IACrB,MAAM;MAAEC;IAAe,CAAC,GAAG,IAAI,CAAC5C,KAAK;IAErC,OAAO4C,cAAc,CAACvC,GAAG,CAAC,CAACwC,IAAI,EAAEC,CAAC,EAAEC,GAAG,kBACrChE,KAAA,CAAA+B,aAAA;MACEC,GAAG,EAAG,GAAE8B,IAAI,CAACtC,IAAK,IAAGsC,IAAI,CAACpC,OAAQ,EAAE;MACpCO,SAAS,EAAE8B,CAAC,GAAGC,GAAG,CAACL,MAAM,GAAG,CAAC,GAAG,mBAAmB,GAAG,8BAA+B;MACrFlC,IAAI,EAAEqC,IAAI,CAACrC;IAAK,GAEfqC,IAAI,CAACpC,OACL,CACJ,CAAC;EACJ;EAEAuC,MAAMA,CAAA,EAAG;IACP,MAAM;MACJC,IAAI;MACJC,WAAW;MACXC,eAAe;MACfC,QAAQ;MACRvB;IACF,CAAC,GAAG,IAAI,CAAC7B,KAAK;IACd,MAAMqD,SAAS,GAAG;MAAEnB,GAAG,EAAEe,IAAI;MAAEd,GAAG,EAAEe,WAAW;MAAE1C,IAAI,EAAE2C;IAAgB,CAAC;IACxE,MAAMG,WAAW,GAAGnE,SAAS,CAAC,CAAC,CAACoE,oBAAoB,GAAG,QAAQ,GAAG,IAAI;IAEtE,oBACExE,KAAA,CAAA+B,aAAA;MAAQE,SAAS,EAAC;IAAqB,gBACrCjC,KAAA,CAAA+B,aAAA;MAAGE,SAAS,EAAC,oCAAoC;MAACR,IAAI,EAAC;IAAO,GAAEqB,IAAI,CAACG,aAAa,CAACrC,QAAQ,CAAC,uBAAuB,CAAC,CAAK,CAAC,eAC1HZ,KAAA,CAAA+B,aAAA;MAAKE,SAAS,EAAG,mBAAkBsC,WAAY;IAAE,gBAC/CvE,KAAA,CAAA+B,aAAA;MAAKE,SAAS,EAAC;IAA2D,GACvEmC,eAAe,KAAK,IAAI,gBAAGpE,KAAA,CAAA+B,aAAA,CAACpB,IAAI;MAACsB,SAAS,EAAC,MAAM;MAACkB,GAAG,EAAEe,IAAK;MAACd,GAAG,EAAEe;IAAY,CAAE,CAAC,gBAAGnE,KAAA,CAAA+B,aAAA,CAACrB,UAAU,EAAA+D,QAAA;MAACxC,SAAS,EAAC;IAAM,GAAKqC,SAAS,CAAG,CAAC,eACnItE,KAAA,CAAA+B,aAAA;MACE,cAAYe,IAAI,CAACG,aAAa,CAACrC,QAAQ,CAAC,uBAAuB,CAAC,CAAE;MAClEqB,SAAS,EAAC;IAAc,GAEvB,IAAI,CAACK,cAAc,CAAC,CAClB,CAAC,eACNtC,KAAA,CAAA+B,aAAA;MACE,cAAYe,IAAI,CAACG,aAAa,CAACrC,QAAQ,CAAC,4BAA4B,CAAC,CAAE;MACvEqB,SAAS,EAAC;IAAyD,gBAEnEjC,KAAA,CAAA+B,aAAA;MAAKE,SAAS,EAAC;IAAM,gBAACjC,KAAA,CAAA+B,aAAA,CAAC1B,iBAAiB,MAAE,CAAM,CAAC,EAChDgE,QAAQ,gBAELrE,KAAA,CAAA+B,aAAA,CAAA/B,KAAA,CAAAuD,QAAA,QACG,IAAI,CAACf,mBAAmB,CAAC,CAAC,EAC1B,IAAI,CAACE,cAAc,CAAC,CACrB,CAAC,GACD,IAAI,CAACkB,oBAAoB,CAAC,CAC7B,CACF,CACF,CACC,CAAC;EAEb;AACF;AAEA9C,aAAa,CAAC4D,SAAS,GAAG;EACxBnC,QAAQ,EAAEtC,SAAS,CAAC0E,SAAS,CAAC,CAC5B1E,SAAS,CAAC2E,IAAI,EACd3E,SAAS,CAAC4E,KAAK,CAChB,CAAC;EACFpC,aAAa,EAAExC,SAAS,CAAC0E,SAAS,CAAC,CACjC1E,SAAS,CAAC2E,IAAI,EACd3E,SAAS,CAAC4E,KAAK,CAChB,CAAC;EACFlC,QAAQ,EAAE1C,SAAS,CAAC6E,OAAO,CAAC7E,SAAS,CAAC8E,KAAK,CAAC;IAC1CvB,OAAO,EAAEvD,SAAS,CAAC+E,MAAM;IACzBvB,KAAK,EAAExD,SAAS,CAAC6E,OAAO,CAAC7E,SAAS,CAAC8E,KAAK,CAAC;MACvCvD,IAAI,EAAEvB,SAAS,CAACgF,KAAK,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;MACvCxD,IAAI,EAAExB,SAAS,CAAC+E,MAAM;MACtBtD,OAAO,EAAEzB,SAAS,CAAC+E,MAAM;MACzBnD,QAAQ,EAAE5B,SAAS,CAACiF,IAAI;MACxBpD,OAAO,EAAE7B,SAAS,CAACkF;IACrB,CAAC,CAAC;EACJ,CAAC,CAAC,CAAC;EACHtB,cAAc,EAAE5D,SAAS,CAAC6E,OAAO,CAAC7E,SAAS,CAAC8E,KAAK,CAAC;IAChDvD,IAAI,EAAEvB,SAAS,CAACgF,KAAK,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;IACvCxD,IAAI,EAAExB,SAAS,CAAC+E,MAAM;IACtBtD,OAAO,EAAEzB,SAAS,CAAC+E;EACrB,CAAC,CAAC,CAAC;EACHd,IAAI,EAAEjE,SAAS,CAAC+E,MAAM;EACtBb,WAAW,EAAElE,SAAS,CAAC+E,MAAM;EAC7BZ,eAAe,EAAEnE,SAAS,CAAC+E,MAAM;EACjCpC,MAAM,EAAE3C,SAAS,CAAC+E,MAAM;EACxBnC,QAAQ,EAAE5C,SAAS,CAAC+E,MAAM;EAC1BX,QAAQ,EAAEpE,SAAS,CAACiF,IAAI;EAExB;EACApC,IAAI,EAAE3C,SAAS,CAACiF;AAClB,CAAC;AAEDtE,aAAa,CAACuE,YAAY,GAAG;EAC3B9C,QAAQ,EAAE,EAAE;EACZE,aAAa,EAAE,EAAE;EACjBE,QAAQ,EAAE,EAAE;EACZkB,cAAc,EAAE,EAAE;EAClBK,IAAI,EAAE,IAAI;EACVC,WAAW,EAAE,IAAI;EACjBC,eAAe,EAAE,IAAI;EACrBxB,MAAM,EAAE,IAAI;EACZC,QAAQ,EAAE,IAAI;EACdwB,QAAQ,EAAE;AACZ,CAAC;AAED,eAAenE,UAAU,CAACY,aAAa,CAAC","ignoreList":[]}